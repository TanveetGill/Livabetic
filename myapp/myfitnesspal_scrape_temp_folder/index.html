<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<head>
	  <!-- Plotly.js -->
	  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
	  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>

	</head>

	<body>
	  <div id="myDiv" style="width: 480px; height: 400px;"></div>
	  <script>
	  	'use strict';
	  	var xDate = [];
	  	var yTotal = [];
	  	uPlotly.d3.csv('carelink.csv', function(error, data) {
  			data.forEach(function(d) { //2013-10-04 22:23:00
  				xDate.push(moment(d['Date'], 'DD/MM/YY').format('YYYY-MM-DD'));
  				if (d['Daily Insulin Total (U)'].length > 0) {
  					yTotal.push(parseFloat(d['Daily Insulin Total (U)']))
  				}
		  	var data = [{
		  	  x: xDate,
		  	  y: yTotal,
		  	  type: 'bar'
		  	}];
  			Plotly.newPlot('myDiv', data);
		  });
  		console.log(xDate, yTotal);
  		});

	  </script>
	</body>

</html>


